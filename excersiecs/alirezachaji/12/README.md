<div dir="rtl">

#### تمرین 12

#### با کمک برنامه ی تمرین قبل برنامه ای بنویسید که مقدار تمام پیکسل های خروجی از فیلتر میانه، فیلتر میانگین، نویز فلفل نمکی را با یک عدد صحیح محاسبه کند.
***
#### توضیحات کلی برنامه
در این برنامه روی یک تصویر از تصاویر بنچمارک را به کمک تابع برنامه قبل نویز فلفل نمکی ایجاد میکنیم و سپس  فیلتر میانگین و میانه را روی تصویر نویزی شده اعمال کرده و آن را نمایش می دهیم
***

#### توضیحات بخش های برنامه
 این قسمت باعث بسته شدن تمام پنجره ها ، ریست شدن تمام متغیر ها و پاک شدن کامند ویندو می گردد <br />

</div>

```matlab

close all         
clear all         
clc    

```
***
<div dir="rtl">
 
  در قسمت بعد ابتدا یکی از تصاویر بنچمارک به تابع تولید نویز ارسال می شود سپس در قسمت بعد هر دو تصویر اصلی و نویزه شده نمایش داده می شود 
 
 ***
 </div>
 
 
 ```matlab
a=pepper_noise("benchmark\lena.png",10);
p=imread('benchmark\lena.png');         
n=size(a);                           
subplot(2,2,1);imshow(p);title("Original Image");            
subplot(2,2,2);imshow(a);title(" Noisy Image ");  

```
***
<div dir="rtl">
 
 در بخش بعد تصویر خامی با دو سطر و ستون اضافه جهت محاسبه فیلتر ها ایجاد و توسط حلقه های تکرار روی تصویر اصلی حرکت کرده و پیکسل بع پیکسل مقادیر تصویر اصلی را
 روی آن منتقل می کنیم
 
***
</div>
 
 
 ```matlab

pic=zeros(n(1)+2,n(2)+2);                % تصویر خام جدیدی با دو سطر و ستون اضافه ایجاد میکند
for i=1:n(1)                             % حلقه جهت آدرس دهی سطری پیکسل ها
    for j=1:n(2)                         % حلقه جهت آدرسی دهی ستونی پیکسل ها
        pic(i+1,j+1)=a(i,j);             % تصویر نویزی شده را در تصویر خام کپی میکند
    end
end

```
***
<div dir="rtl">
 
 در این بخش ابعاد تصویر را بدست آورده و توسط دو حلقه تکرار مقادیر هر پیکسل به همراه 8 پیکسل کناری آن را جمع کرده و میانگین می گیریم و مقادیر حاصل را در تصویری جدید نمایش می دهیم می بینیم که فیلتر میانگین مقداری باعث تاری عکس می گردد
 
***
</div>
 
 
 ```matlab


n=size(pic);                           
pic=uint8(pic);                        
                         %%%%%  اعمال فیلتر میانگین   %%%%% 
for i=2:n(1)-1                                     
    for j=2:n(2)-1                      
        p123=((double(pic(i-1,j-1))+double(pic(i-1,j))+double(pic(i-1,j+1))));   
        p456=((double(pic(i,j-1))+double(pic(i,j))+double(pic(i,j+1))));         
        p789=((double(pic(i+1,j-1))+double(pic(i+1,j))+double(pic(i+1,j+1))));
        p=round((p123+p456+p789)/9);    
        p=uint8(p);                  
        a(i-1,j-1)=p;                  
    end
end 
subplot(2,2,3);imshow(a);title("Average Filter Image");     

```
***
<div dir="rtl">
 
 در این بخش توسط حلقه های تکرار تصویر پیمایش شده و 8 پیکسل اطراف هر تصویر و خود آن پیکسل درون یک ماتریس مرتب شده و عنصر پنچم آن به عنوان مقدار آن پیکسل در نظر گرفته
 می شود و سپس تصویر تولیدی نمایش داده می شود می بینیم که در این فیلتر تقریبا تمام نویزها از بین رفته و تصویری مشابه تصویر اولیه تولید می گردد .
 
***
                            %%%%%  اعمال فیلتر میانه   %%%%%

</div>
 
         
 
 ```matlab

m=zeros(9,3);                        
for i=2:n(1)-1                       
    for j=2:n(2)-1                    
        m(1:3)=pic(i-1,j-1:j+1);     
        m(4:6)=pic(i,j-1:j+1);
        m(7:9)=pic(i+1,j-1:j+1);
        M=sort(m);                   
        a(i-1,j-1)=M(5);           
    end
end    
subplot(2,2,4);imshow(a);title("Median Filter Image");             
```
***
<div dir="rtl">
 
 بخش بعد مربوط به تابع اعمال نویز نمک فلفلی روی تصویر می باشد
در ابتدا تصویر ورودی خوانده شده و در متغیر ذخیره می گردد سپس بررسی می شود اگر تصویر رنگی بود آن را به خاکستری تبدیل می کند و همچنین محاسبه می کند که با توجه به ابعاد تصویر متناسب با درصد خواسته شده چند پیکسل باید نویزی شوند .
 
***
</div>
 
 
 ```matlab

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%% Pepper_noise Function %%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% This nunction get the address of an image and number of noise pixel%%%
%%%%%%%%%%%%%%%%%%%%% and add noise on the Image %%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
function pic=pepper_noise(add,ps)                
pic=imread(add);                                
figure;                                          
subplot(1,2,1);imshow(pic);                     
n=size(pic);                                    
if (n(3)==3)                                    
    pic=rgb2gray(pic);                          
end 
px=round((ps*n(1)*n(2))/100);                   
```
***
<div dir="rtl">
 
در این حلقه تکراری به تعداد پیکسل هایی که باید نویزی شوند وجود دارد که به ازای هر پیکسل مقدار رندمی بین 0 و 255 را به آن پیکسل اختصاص می دهد و در نهایت نیز
نویزهای را روی تصویر اصلی اعمال کرده و نتیجه را نمایش می دهد

 </div>
 
```matlab

for i=1:px                                      
    x=randi(n(1));                               
    y=randi(n(2));                                
    z=round(mod(randi(10),2));                 
    pic(x,y)=z*255;                           
end
pic=uint8(pic);                                  
subplot(1,2,2);imshow(pic);                    
```
![alt text](https://github.com/semnan-university-ai/image-processing-class/blob/6606dac982f26896f5093ad5dbcc0dda28d49371/excersiecs/alirezachaji/12/Exce12.png)
***

