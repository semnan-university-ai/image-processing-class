
> # Exercise 12
> Using the previous exercise , write a program that calculates the value of all the output pixels of the middle filter, the average filter, and the salt pepper noise . 
***
>CODE

Main Program
```ruby
 
close all          % تمام پنجره ها را می بندد
clear all          % سيستم مموري و مقادير تمام متغير ها را پاك ميكند
clc                % كامند ويندو را پاك مي كند
a=pepper_noise("benchmark\lena.png",10); % توسط تابع تمرین قبل نویز نمک فلفلی 10 درصد روی تصویر اعمال میکند
p=imread('benchmark\lena.png');          % تصویر اصلی را درون متغیر میریزد
n=size(a);                               % ابعاد تصویر اصلی را بدست می آورد
subplot(2,2,1);imshow(p);title("Original Image");               % تصویر اصلی را نمایش می دهد
subplot(2,2,2);imshow(a);title(" Noisy Image ");                % تصویر را پس از اعمال نویز نشان می دهد
pic=zeros(n(1)+2,n(2)+2);                % تصویر خام جدیدی با دو سطر و ستون اضافه ایجاد میکند
for i=1:n(1)                             % حلقه جهت آدرس دهی سطری پیکسل ها
    for j=1:n(2)                         % حلقه جهت آدرسی دهی ستونی پیکسل ها
        pic(i+1,j+1)=a(i,j);             % تصویر نویزی شده را در تصویر خام کپی میکند
    end
end
n=size(pic);                             % سایز تصویر جدید را بدست می آورد
pic=uint8(pic);                          % تبدیل میکند uint8 تصویر را به مد
                         %%%%%  اعمال فیلتر میانگین   %%%%% 
for i=2:n(1)-1                           % حلقه جهت آدرس دهی سطری پیکسل ها             
    for j=2:n(2)-1                       % حلقه جهت آدرسی دهی ستونی پیکسل ها
        p123=((double(pic(i-1,j-1))+double(pic(i-1,j))+double(pic(i-1,j+1))));   % برای به دست آوردن میانگین مقادیر هر پیکسل به همراه 8 پیکسل اطراف آن را جمع میزنیم 
        p456=((double(pic(i,j-1))+double(pic(i,j))+double(pic(i,j+1))));         
        p789=((double(pic(i+1,j-1))+double(pic(i+1,j))+double(pic(i+1,j+1))));
        p=round((p123+p456+p789)/9);     % میانگین جمع بدست آمده از سه سطر بالا را محاسبه میکنیم
        p=uint8(p);                      % تبدیل میکند uint8 تصویر را به مد
        a(i-1,j-1)=p;                    % مقدار پیکسل متناظر را در تصویر جدید برابر میانگین بدست آمده قرار می دهیم
    end
end 
subplot(2,2,3);imshow(a);title("Average Filter Image");                % تصویر حاصل از فیلتر میانگین را نمایش می دهیم                          
m=zeros(9,3);                            % ماتریسی با ابعاد 9 در 3 ایجاد میکنیم
for i=2:n(1)-1                           % حلقه جهت آدرس دهی سطری پیکسل ها
    for j=2:n(2)-1                       % حلقه جهت آدرس دهی ستونی پیکسل ها
        m(1:3)=pic(i-1,j-1:j+1);         % مقادیر هر پیکسل به همراه 8 پیکسل اطراف آن را در ماتریسی که در بالا ایجاد کردیم قرار می دهیم
        m(4:6)=pic(i,j-1:j+1);
        m(7:9)=pic(i+1,j-1:j+1);
        M=sort(m);                       % ماتریس حاصل را مرتب میکنیم
        a(i-1,j-1)=M(5);                 % مقدار عنصر وسط که همان میانه نام دارد را در تصویر جدید قرار می دهیم 
    end
end    
subplot(2,2,4);imshow(a);title("Median Filter Image");                % تصویر حاصل از فیلتر میانه را نمایش می دهیم
```
Function
```ruby
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%% Pepper_noise Function %%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% This nunction get the address of an image and number of noise pixel%%%
%%%%%%%%%%%%%%%%%%%%% and add noise on the Image %%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
function pic=pepper_noise(add,ps)                 % تابع اعمال نویز روی تصویر
pic=imread(add);                                  % تصویر را با توجه به آدرس که به تابع داده شده است میخواند
figure;                                           % یک فیگور جدید ایجاد میکند
subplot(1,2,1);imshow(pic);                       % تصویر را نمایش می دهد
n=size(pic);                                      % ابعاد تصویر را بدست می آورد
if (n(3)==3)                                      % بررسی میکند تصویر رنگی است یا خیر
    pic=rgb2gray(pic);                            % اگر رنگی بود آن را به خاکستری تبدیل میکند
end 
px=round((ps*n(1)*n(2))/100);                     % با توجه به درصد مقدار پیکسل که باید نویزی شود را محاسبه میکند
for i=1:px                                        % حلقه  به تعداد نویز ها
    x=randi(n(1));                                % مختصات سطری رندم
    y=randi(n(2));                                % مختصات ستونی رندم 
    z=round(mod(randi(10),2));                    % به صورت رندم مشخص میکند پیکسل سیاه باشد یا سفید
    pic(x,y)=z*255;                               % نویز را روی تصویر اعمال میکند
end
pic=uint8(pic);                                   % تبدیل میکند uint8 تصویر را به مد 
subplot(1,2,2);imshow(pic);                       % تصویر نویزی شده را نمایش می دهد
```
![alt text](https://github.com/semnan-university-ai/image-processing-class/blob/6606dac982f26896f5093ad5dbcc0dda28d49371/excersiecs/alirezachaji/12/Exce12.png)
***
<div dir="rtl">
توضیحات کلی برنامه <br />
 در این برنامه روی یک تصویر از تصاویر بنچمارک را به کمک تابع برنامه قبل نویز فلفل نمکی ایجاد میکنیم و سپس  فیلتر میانگین و میانه را روی تصویر نویزی شده اعمال کرده و آن را نمایش می دهیم. 
</div>
